#!/usr/bin/env bash

if [[ "$#" -lt "1" ]]; then
  echo >&2 "Usage: $(basename $0) <output>"
  exit 1
fi
if [[ -e "tmp" ]]; then
  echo >&2 "I need a folder to work with called tmp! Please delete or rename that!"
  exit 1
fi

mkdir -p tmp
git clone git://github.com/dpoggi/oh-my-zsh.git tmp/.oh-my-zsh
git clone git://github.com/dpoggi/dcp.git tmp/.dcp
git clone git://github.com/dpoggi/dotvim.git tmp/.vim
cd tmp/.vim
git submodule update --init

cd ..
tar czf "../$1" .oh-my-zsh .dcp .vim
cd ..
rm -rf tmp
