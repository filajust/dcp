#!/bin/bash

fatal() {
  printf >&2 "\033[1;37;41m[FATAL]:\033[0m %s\n" "$1"
  exit "${2:-1}"
}

config="${HOME}/.dcp/conf/pushover"
[[ -e "${config}" ]] && source "${config}" || fatal "Missing ${config} file."
[[ "$#" -gt "0" ]] || fatal "Message required."

curl --silent --data "token=${PUSHOVER_TOKEN}&user=${PUSHOVER_USER}&message=$1" "https://api.pushover.net/1/messages.json"
