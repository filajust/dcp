#
# Add oh-my-zsh plugins
#

# Standard plugins
plugins=( emoji git-extras history jsontools zsh-syntax-highlighting )

# Mac-specific plugins
if [[ "${DCP_OS}" = "Darwin" ]]; then
  plugins+=( brew brew-cask osx )
fi

# User-specified plugins
if [[ -e "${DCP}/conf/plugins" ]]; then
  for plugin in $(cat "${DCP}/conf/plugins"); do
    plugins+=( "${plugin}" )
  done
  unset plugin
fi


#
# Load all the things!
#

# Load most of dcp
[[ -e "${DCP}/lib/init.sh" ]] && source "${DCP}/lib/init.sh"

# Load oh-my-zsh itself
[[ -e "${ZSH}/oh-my-zsh.sh" ]] && source "${ZSH}/oh-my-zsh.sh"

# 'Command not found' hook for Arch Linux
if [[ -s "/usr/share/doc/pkgfile/command-not-found.zsh" ]]; then
  source "/usr/share/doc/pkgfile/command-not-found.zsh"
fi

# Completion aliasing for hub command
if hash hub 2>/dev/null; then
  alias git="hub"
  if type compdef >/dev/null; then
     compdef hub=git
  fi
fi

# Finish up the details
[[ -e "${DCP}/lib/post_init.sh" ]] && source "${DCP}/lib/post_init.sh"
